(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{348:function(t,e,n){"use strict";n.r(e);n(82);var o,c=n(27),l=n(90),r=(n(349),{name:"ChatBoard",data:function(){return{comments:[],comments_box:[],coment:""}},methods:{send:function(){l.a.firestore().collection("room").doc("001").collection("comments").add({content:this.coment,createdAt:new Date,userid:"001"}).then(this.coment="")},getChat:(o=Object(c.a)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.firestore().collection("room").doc("001").collection("comments").orderBy("createdAt","asc").limit(50).get().then((function(t){t.forEach((function(t){e.comments_box.push({content:t.data().content,createdAt:t.data().createdAt.toDate().toLocaleTimeString().toLocaleString()})}))}));case 2:this.comments=this.comments_box,console.log(this.comments_box),this.comments_box=[];case 5:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},watch:{},mounted:function(){var t=this;l.a.firestore().collection("room").doc("001").collection("comments").onSnapshot((function(){t.getChat()}))},created:function(){}}),d=n(39),m=n(55),h=n.n(m),v=n(205),f=n(326),y=n(350),_=n(156),w=n(157),C=n(102),x=n(74),I=n(338),k=n(344),component=Object(d.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list",{attrs:{"three-line":""}},[n("v-list",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll",value:{always:!1,smooth:!0,scrollonremoved:!0},expression:"{always: false, smooth: true, scrollonremoved:true}"}],staticClass:"overflow-y-auto",attrs:{"max-height":"470",height:"470",elevation:"0",tile:""}},t._l(t.comments,(function(e,o){return n("v-list-item",{key:o,staticClass:"black--text",attrs:{index:o}},[n("v-list-item-subtitle",{staticClass:"text--primary"},[t._v(t._s(e.content))]),t._v(" "),n("v-list-item-subtitle",[t._v("\n                "+t._s(e.createdAt)+"\n            ")])],1)})),1),t._v(" "),n("v-card",{staticClass:"grey display-1  pa-0 ma-0",attrs:{height:"50",elevation:"0",tile:""}},[n("v-row",{staticClass:"ma-0 pa-0",attrs:{justify:"end"}},[n("v-col",{staticClass:"ma-0 pa-0 py-4",attrs:{cols:"6"}},[n("v-text-field",{staticClass:"ma-0",attrs:{dense:"",label:"Message",color:"black"},model:{value:t.coment,callback:function(e){t.coment=e},expression:"coment"}})],1),t._v(" "),n("v-col",{staticClass:"ma-0 pa-0 py-1",attrs:{cols:"2"}},[n("v-btn",{staticClass:"pa-0 ma-0 ml-1",attrs:{tile:"",large:"",color:"teal",icon:""},on:{click:t.send}},[n("v-icon",{staticClass:"pa-0 ma-0",attrs:{color:"white"}},[t._v("mdi-send")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;h()(component,{VBtn:v.a,VCard:f.a,VCol:y.a,VIcon:_.a,VList:w.a,VListItem:C.a,VListItemSubtitle:x.b,VRow:I.a,VTextField:k.a})},358:function(t,e,n){"use strict";n.r(e);var o=n(90),c=n(349),l=n.n(c),r={name:"ChatBoard",data:function(){return{APIKey:"79dca892-7921-4630-b281-eee96ef188e9",selectedAudio:"",audios:[],videos:[],localStream:null,peerId:"",calltoid:"",deliveryId:"",flg:!1,thumbnail:""}},methods:{makeCall:function(){var t=this.peer.call(this.calltoid,this.localStream);this.connect(t)},connect:function(t){t.on("stream",(function(t){var e=document.getElementById("their-video");e.srcObject=t,e.play()}))}},watch:{deliveryId:function(){this.calltoid=this.deliveryId,""!=this.deliveryId&&this.makeCall()}},mounted:function(){var t=this;this.peer=new l.a({key:this.APIKey,debug:3}),this.peer.on("open",(function(){t.peerId=t.peer.id})),this.peer.on("call",(function(e){e.answer(t.localStream),t.connect(e)})),""!=this.items.user_id&&o.a.firestore().collection("delivery").doc(this.items.user_id).onSnapshot((function(){o.a.firestore().collection("delivery").doc(t.items.user_id).get().then((function(e){t.deliveryId=e.data().peer,t.flg=e.data().flg,t.thumbnail=e.data().thumbnail}))}))},computed:{items:function(){return this.$store.getters.delivery_info}},components:{Chat:n(348).default},created:function(){}},d=n(39),m=n(55),h=n.n(m),v=n(136),f=n(157),component=Object(d.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-list",{attrs:{"three-line":""}},[e("section",{staticClass:"container"},[e("div",[e("v-img",{attrs:{"max-height":"450","max-width":"600",src:this.thumbnail}}),this._v(" "),e("video",{attrs:{id:"their-video",width:"200",autoplay:"",playsinline:""}}),this._v(" "),e("video",{attrs:{id:"my-video",muted:"true",width:"200",autoplay:"",playsinline:""},domProps:{muted:!0}}),this._v(" "),e("div",{staticClass:"main"},[e("h2",[this._v("Nuxt.js + SkyWayのラジオチャット")])])],1)]),this._v(" "),e("Chat")],1)}),[],!1,null,null,null);e.default=component.exports;h()(component,{Chat:n(348).default}),h()(component,{VImg:v.a,VList:f.a})}}]);